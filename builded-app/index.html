<html>
  <head>
    <script src="bower_components/platform/platform.js"></script>
    <link rel="stylesheet" type="text/css" href="style.css">
    <!-- Lib elements -->
    <link rel="import" href="lib/snap-container/snap-container.html">
    <link rel="import" href="lib/snap-widget/snap-widget.html">
    <!-- Widgets -->
    <link rel="import" href="widgets/widget-text/widget-text.html">
    <link rel="import" href="widgets/widget-timeline/widget-timeline.html">
  </head>
  <body unresolved>
    <a href="#" onclick="toggleMode()">Toggle edition mode</a>

    <div id="widgets-container">
    </div>

    <!--<snap-container id="widgetsContainer" layout="horizontal">
      <widget-text id="widget-1"></widget-text>
      <snap-container layout="vertical">
        <widget-timeline></widget-timeline>
        <widget-text></widget-text>
        <widget-text></widget-text>
      </snap-container>
    </snap-container>-->

    <script type="text/javascript">

      function toggleMode() {
        var body = document.body;
        if(body.hasAttribute('view-only')) {
          body.removeAttribute('view-only');
        } else {
          body.setAttribute('view-only', true);
        }
      }

      function buildWidget(node) {
        var el = document.createElement(node.type);
        el.options = node.options;
        if(Array.isArray(node.children)) {
          node.children.forEach(function(childNode) {
            var childEl = buildWidget(childNode);
            el.appendChild(childEl);
          });
        }
        return el;
      }

      window.addEventListener('WebComponentsReady', function(e) {

        var widgets = {
          "type": "SNAP-CONTAINER",
          "options": {
            "gutter": 1,
            "layout": "horizontal"
          },
          "children": [
            {
              "type": "WIDGET-TEXT",
              "options": {
                "text": ""
              }
            },
            {
              "type": "SNAP-CONTAINER",
              "options": {
                "gutter": 1,
                "layout": "vertical"
              },
              "children": [
                {
                  "type": "WIDGET-TEXT",
                  "options": {
                    "text": ""
                  }
                },
                {
                  "type": "WIDGET-TEXT",
                  "options": {
                    "text": ""
                  }
                },
                {
                  "type": "WIDGET-TIMELINE",
                  "options": {
                    
                  }
                }
              ]
            }
          ]
        };

        var container = document.getElementById('widgets-container');
        container.appendChild(buildWidget(widgets));

      });



    </script>
  </body>
  
</html>